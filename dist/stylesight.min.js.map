{"version":3,"sources":["stylesight.concat.js"],"names":["degToRad","x","Math","PI","getVideoFeed","video","Promise","resolve","getVideoFeedAttempts","errMessage","test","navigator","userAgent","window","MSStream","location","protocol","startsWith","mozGetUserMedia","audio","facingMode","stream","srcObject","err","console","log","alert","mediaDevices","getUserMedia","then","catch","webkitGetUserMedia","msGetUserMedia","e","addEventListener","async","document","querySelector","controls","classList","toggle","activeStyle","styles","id","name","Net","forEach","style","img","styleDiv","createElement","className","label","innerHTML","loadingContainer","spinner","loadingNote","width","onload","src","appendChild","stylesContainer","hasTexture","styleBox","visible","makeBoxObject","model","display","opacity","loadStyle","done","total","parseInt","remove","requestAnimationFrame","renderer","THREE","WebGLRenderer","antialias","alpha","setSize","innerWidth","innerHeight","body","domElement","backgroundColor","vrDisplay","effect","VREffect","separation","getVRDisplays","displays","length","enterVRButton","getElementById","contains","includes","requestPresent","source","StereoEffect","add","scene","Scene","boxMaterial","texture","box","styleMaterial","styleTexture","camera","PerspectiveCamera","inferenceCanvas","inferenceContext","getContext","autoplay","height","boxWidth","boxHeight","boxGeometry","BoxGeometry","Texture","minFilter","NearestFilter","ShaderMaterial","uniforms","type","value","vertexShader","vertexShaderSource","text","fragmentShader","getVideoShader","Mesh","position","z","atan","inferring","multScalar","tf","scalar","render","currentTime","needsUpdate","hasOwnProperty","drawImage","result","tidy","preprocessed","fromPixels","inferenceResult","predict","dispose","mul","shape","data","rgbaData","Uint8Array","i","image","styleGeometry","DataTexture","RGBAFormat","UnsignedByteType","flipY","transparent","radius","parseFloat","radiusSlider","compileShader","nextFrame","setTimeout","onloadedmetadata","href","fullscreenEnabled","requestFullScreen","webkitFullscreenEnabled","webkitRequestFullScreen","mozFullScreenEnabled","mozRequestFullScreen","msFullScreenEnabled","msRequestFullScreen","aspect","updateProjectionMatrix","pause","resolutionSlider","updateRadius","updateOpacity","opacitySlider","ckptsDir","URL","substr","lastIndexOf","[object Object]","callback","checkpointManifest","vs","getVariable","fetch","r","arrayBuffer","values","Float32Array","Tensor","make","json","manifest","variableNames","Object","keys","variablePromises","map","donePromises","p","all","variables","val","vi","preprocessedInput","dtype","conv1","this","convLayer","conv2","conv3","resid1","residualBlock","resid2","resid3","resid4","resid5","convT1","convTransposeLayer","convT2","convT3","outTanh","tanh","scaled","shifted","clamped","clipByValue","input","strides","relu","varId","y","conv2d","varName","y2","instanceNorm","numFilters","newShape","conv2dTranspose","addStrict","inDepth","moments","mu","mean","sigmaSq","variance","shift","scale","normalized","div","sub","sqrt","as3D","toString"],"mappings":"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","file":"stylesight.min.js"}