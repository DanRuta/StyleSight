{"version":3,"sources":["stylesight.concat.js"],"names":["degToRad","x","Math","PI","getVideoFeed","video","Promise","resolve","getVideoFeedAttempts","errMessage","test","navigator","userAgent","window","MSStream","location","protocol","startsWith","mozGetUserMedia","audio","facingMode","stream","srcObject","err","console","log","alert","mediaDevices","getUserMedia","then","catch","webkitGetUserMedia","msGetUserMedia","e","addEventListener","async","document","querySelector","controls","classList","toggle","activeStyle","styles","id","name","Net","forEach","style","img","styleDiv","createElement","className","label","innerHTML","loadingContainer","spinner","loadingNote","width","onload","src","appendChild","stylesContainer","hasTexture","styleBox","visible","makeBoxObject","model","display","opacity","loadStyle","done","total","remove","requestAnimationFrame","renderer","THREE","WebGLRenderer","antialias","alpha","setSize","innerWidth","innerHeight","body","domElement","backgroundColor","vrDisplay","effect","VREffect","separation","getVRDisplays","displays","length","enterVRButton","getElementById","contains","includes","requestPresent","source","StereoEffect","add","scene","Scene","boxMaterial","texture","box","styleMaterial","styleTexture","camera","PerspectiveCamera","inferenceCanvas","inferenceContext","getContext","autoplay","height","boxWidth","boxHeight","boxGeometry","BoxGeometry","Texture","minFilter","NearestFilter","ShaderMaterial","uniforms","type","value","vertexShader","vertexShaderSource","text","fragmentShader","getVideoShader","Mesh","position","z","atan","inferring","multScalar","tf","scalar","render","currentTime","needsUpdate","hasOwnProperty","drawImage","result","tidy","preprocessed","fromPixels","inferenceResult","predict","dispose","mul","shape","data","rgbaData","Uint8Array","i","image","styleGeometry","DataTexture","RGBAFormat","UnsignedByteType","flipY","transparent","radius","compileShader","nextFrame","setTimeout","onloadedmetadata","href","fullscreenEnabled","requestFullScreen","webkitFullscreenEnabled","webkitRequestFullScreen","mozFullScreenEnabled","mozRequestFullScreen","msFullScreenEnabled","msRequestFullScreen","aspect","updateProjectionMatrix","pause","updateRadius","parseFloat","radiusSlider","updateOpacity","opacitySlider","ckptsDir","URL","substr","lastIndexOf","[object Object]","callback","checkpointManifest","vs","getVariable","fetch","r","arrayBuffer","values","Float32Array","Tensor","make","json","manifest","variableNames","Object","keys","variablePromises","map","donePromises","p","all","variables","val","vi","preprocessedInput","dtype","conv1","this","convLayer","conv2","conv3","resid1","residualBlock","resid2","resid3","resid4","resid5","convT1","convTransposeLayer","convT2","convT3","outTanh","tanh","scaled","shifted","clamped","clipByValue","input","strides","relu","varId","y","conv2d","varName","y2","instanceNorm","numFilters","newShape","conv2dTranspose","addStrict","inDepth","moments","mu","mean","sigmaSq","variance","shift","scale","normalized","div","sub","sqrt","as3D","toString"],"mappings":"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","file":"stylesight.min.js"}